---
layout: post
title: 万网企业邮箱域名解析不生效的原因
modified:
categories: 
excerpt: 域名配置成cname解析到github域名，导致万网一键设置企业邮箱解析时配置冲突。
tags: 域名解析
comments: true
share: true
---

之前把leewenlin.com的域名直接用cname解析到leewenlin.github.com上，本身是没有问题的。但是在万网弄企业邮箱的时候，虽然我的域名和企业邮箱都在同一个万网账户下，用一键设置域名解析，却一直都解析不成功。后来发现网上的指南里的正确的配置是


|域名|解析记录类型|优先级|解析记录值|
|:--:|:----------:|:----:|:--------:|
|	|MX			|5		|mxn.mxhichina.com|
|	|	MX		|10		|mxw.mxhichina.com|
|pop3|	CNAME	|		|pop3.mxhichina.com|
|smtp|	CNAME	|		|smtp.mxhichina.com|
|mail|	CNAME	|		|mail.mxhichina.com|
|	|	TXT		|		|v=spf1 include:spf.mxhichina.com -all|

而我用一键生成之后的配置是

|域名|解析记录类型|优先级|解析记录值|
|:--:|:----------:|:----:|:--------:|
|pop3|	CNAME	|		|pop3.mxhichina.com|
|smtp|	CNAME	|		|smtp.mxhichina.com|
|mail|	CNAME	|		|mail.mxhichina.com|

和正确的配置相比少了两条mx记录和反垃圾邮件的txt，然后我就手动添加这三条域名解析记录，添加的时候报错冲突。发现这三条域名是@，应该是和我之前配的github的的@的cname记录冲突了。

之前一键设置企业邮箱的域名解析的时候，这个报错又没有提示出来，所以都没发现是这个原因导致的域名解析失败。所以，偷懒弄cname是不对的，还是得老老实实的去查下域名的解析ip。查出来四个ip，都给配上了。再点一下一键设置域名解析，那三条之前漏掉没添加的解析记录都添加进去了，邮箱的域名解析也成功了。
